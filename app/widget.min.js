$(document).ready((function(){var e=$("#external-content");e.load(e.attr("data-external-url"));const t=document.createElement("div");t.id="myf_modal";let n=document.createElement("div");n.id="myf_item_modal",t.appendChild(n),document.body.appendChild(t)}));const myf_modal_url=function(e){},muurigrid_modal=function(e,t){let n=t,s="";void 0!==e.contact&&(""!=e.contact.phone&&void 0!==e.contact.phone||""!=e.contact.email&&void 0!==e.contact.email||""!=e.contact.website&&void 0!==e.contact.website)&&(s='$1<div class="mu_item_contact"><strong>${Contact}</strong>$0<br />',""==!e.contact.phone&&(s=s+'<p><span class="glyphicon glyphicon-earphone" aria-hidden="true"></span> '+e.contact.phone+"</p>"),""==!e.contact.email&&(s=s+'<p><span class="glyphicon glyphicon-envelope" aria-hidden="true"></span> '+e.contact.email+"</p>"),""==!e.contact.website&&(s=s+'<p><span class="glyphicon glyphicon-globe" aria-hidden="true"></span> <a href="'+e.contact.website+'" target="_blank">'+e.contact.website+"</a></p>"),s+="</div>");let a=Object.keys(e),o="",d="";if("store"==e.type&&void 0!==e.businesshours&&void 0!==e.businesshours[1]){let t=new Date;dayOfWeek=t.getDay(),dayOfWeek++,o='<div class="mu_item__today show"></div>',o+='<div class="mu_item__businesshours hide"><strong>$1${Business hours}$0</strong><br />';const n={1:"Sunday",2:"Monday",3:"Tuesday",4:"Wednesday",5:"Thursday",6:"Friday",7:"Saturday",h:"Holiday"};[2,3,4,5,6,7,1,"h"].forEach(s=>{let a="1"==e.businesshours[s].active?e.businesshours[s].start.hour+":"+e.businesshours[s].start.minute+" - "+e.businesshours[s].end.hour+":"+e.businesshours[s].end.minute:"$1${Closed}$0";if(o=o+'<div class="mu_item_b_day trading'+a.includes(":")+'">'+n[s]+':</div><div class="mu_item_b_hours trading'+a.includes(":")+'">'+a+"</div>",s==dayOfWeek)if(a.includes(":")){let n=parseInt(e.businesshours[s].start.hour),a=parseInt(e.businesshours[s].start.minute),o=parseInt(e.businesshours[s].end.hour),i=parseInt(e.businesshours[s].end.minute),c=new Date;c.setHours(n,a);let l=new Date;l.setHours(o,i),d=t>=c&&t<=l?"$1<strong>${Open until}</strong> $0"+e.businesshours[s].end.hour+":"+e.businesshours[s].end.minute:"$1<strong>${Closed}</strong>$0"}else d="$1${Closed}$0"}),o=o+'<br /></div><div class="mu_item__today show">'+d+'</div><div class="cleaner clear"></div><br />'}"loyalty"==e.type&&(n=n.replace("{data.points.percentage}",Math.min(100,parseInt(e.points.percentage))),n=n.replace("{data.points.required}",e.points.required),n=n.replace("{data.points.collected}",e.points.collected),n=n.replace("{data.points.text}",e.points.text)),""==e.text&&(n=n.replace("{data.text}",o),n=n.replace("{data.businesshours}","")),e.text&&e.text.length<200&&(n=n.replace("{data.text}",e.text+o),n=n.replace("{data.businesshours}","")),a.forEach(t=>{"contact"==t?n=n.replace("{data.contact}",s):"businesshours"==t?n=n.replace("{data.businesshours}",o):(n=n.replace("{data."+t+"}",e[t]),n=n.replace("{data."+t+"}",e[t]),n=n.replace("{data."+t+"}",e[t]),n=n.replace("{data.br-"+t+"}",""!=e[t]?e[t]+"<br />":""))}),(void 0!==e.street&&""!=e.street||void 0!==e.city&&""!=e.city||void 0!==e.zip&&""!=e.zip||void 0!==e.country_iso&&""!=e.country_iso)&&(n=n.replace("{data.address-title}","<strong>$1${Address}$0</strong><br />"));n=n.replace(/\{data\.n*\}/g,"");let i=document.getElementById("myf_item_modal");i.innerHTML=n,i.classList.add(e.type),sm_modal=document.getElementById("myf_modal"),sm_modal.classList.add("active"),setTimeout((function(){document.body.addEventListener("click",sm_click_off_widget),document.getElementById("myf_modal").addEventListener("click",sm_click_off_widget),i.classList.add("active")}),10),document.getElementById("mu_item__close").addEventListener("click",sm_close_widget),document.addEventListener("keydown",sm_key_off_widget)},sm_close_widget=function(e){let t=document.getElementById("myf_modal"),n=document.getElementById("myf_item_modal");t.classList.remove("active"),n.classList.remove("active","promotion","store"),document.body.removeEventListener("click",sm_click_off_widget),void 0!==e&&e.preventDefault()},sm_close=function(e){sm_close_widget(e)},sm_click_off_widget=function(e){document.getElementById("myf_modal");document.getElementById("myf_item_modal").contains(e.target)||sm_close_widget()},sm_key_off_widget=function(e){document.getElementById("myf_modal"),document.getElementById("myf_item_modal");"Escape"==e.key&&sm_close_widget()},get_modal_widget=function(e){$.get({url:e,beforeSend:function(){document.getElementById("myf_modal").classList.add("active")},success:function(e){let t=document.createElement("div");t.classList.add("community-content--full-size");let n=document.createElement("a");n.id="cm_item__close",n.setAttribute("href","#"),n.innerHTML='<img src="https://www.myfavorito.com/portals/mcdapp/design/icons/close.svg" alt="x">',t.appendChild(n);let s=document.createElement("div");s.id="ajax-content",s.innerHTML=e,t.appendChild(s);for(var a=document.getElementById("myf_item_modal");a.lastElementChild;)a.removeChild(a.lastElementChild);a.appendChild(t),(a=document.getElementById("myf_item_modal")).classList.add("active"),setTimeout((function(){document.body.addEventListener("click",sm_click_off_widget),document.getElementById("myf_modal").addEventListener("click",sm_click_off_widget),webclient_modal_form_ehandler_link()}),10),n.addEventListener("click",sm_close_widget),document.addEventListener("keydown",sm_key_off_widget)},async:!1})},webclient_modal_form_ehandler_link=function(){let e=document.getElementById("ajax-content");e.addEventListener("click",webclient_modal_event_click_a),e.addEventListener("submit",webclient_modal_event_form)},webclient_modal_event_click_a=function(e){let t=e.target;if(null!=t.href){if("#"==t.href||t.href.includes("javascript")||t.classList.contains("js-off"))return!0;e.preventDefault();let n=t.href,s=$("#ajax-content");$.ajax({url:n,data:"modal=1",beforeSend:function(){s.fadeTo("fast",.5)}}).done((function(e){s.html(e)})).always((function(){s.fadeTo("fast",1)}))}else console.log("undefined")},webclient_modal_event_form=function(e){var t=$(e.target),n=t.closest("form");if(n.hasClass("js-off")||n.closest(".js-off").get(0))return!0;e.preventDefault();var s={target:"#ajax-content",data:{"X-Requested-With":"AjaxFormSubmit",modal:"1",submit:"1"},beforeSubmit:function(){$("input, select",n).prop("disabled",!0),n.fadeTo("fast",.5)},success:function(){n.fadeTo("fast",1),$("input:submit, select",n).prop("disabled",!1),console.log("test")},error:function(){n.fadeTo("fast",1),$("input:submit, select",n).prop("disabled",!1)}};s.data[t.attr("name")]=t.attr("value")||"",n.ajaxSubmit(s)};
